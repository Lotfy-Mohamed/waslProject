(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3107],{5022:function(e,t,r){Promise.resolve().then(r.bind(r,5689))},5689:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(7437),a=r(1897),l=r(9095),n=r(2623),i=r(3464),o=r(2265),c=r(9089),d=r(5515),m=r.n(d);function x(){let[e,t]=(0,o.useState)([]),[r,d]=(0,o.useState)(null),[x,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(""),[g,f]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),[j,v]=(0,o.useState)(""),[N,w]=(0,o.useState)([]),[O,k]=(0,o.useState)(!1),[P,S]=(0,o.useState)(null),[C,_]=(0,o.useState)(""),[B,E]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,n.Z)()},[]);let Z=async()=>{i.Z.get("".concat(a.A,"/auth/users/only"),{headers:{Authorization:"Bearer ".concat(g)}}).then(e=>{w(e.data)}).catch(e=>{if(401===e.response.status){(0,n.Z)();return}w([])})},z=async()=>{i.Z.get("".concat(a.A,"/auth/employees"),{headers:{Authorization:"Bearer ".concat(g)}}).then(e=>{t(e.data)}).catch(e=>{if(401===e.response.status){(0,n.Z)();return}t([])})};(0,o.useEffect)(()=>{g&&z()},[g]);let A=e=>{i.Z.get("".concat(a.A,"/auth/employees/").concat(e),{headers:{Authorization:"Bearer ".concat(g)}}).then(e=>{d(e.data),u(!0)}).catch(e=>{if(401===e.response.status){(0,n.Z)();return}m().fire({icon:"error",title:"خطأ",text:"حدث خطأ أثناء جلب بيانات المستخدم"})})},q=e=>{m().fire({title:"هل أنت متأكد؟",text:"هل تريد حذف هذا الموظف؟",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"نعم",cancelButtonText:"لا"}).then(t=>{t.isConfirmed&&i.Z.delete("".concat(a.A,"/auth/employees/").concat(e),{headers:{Authorization:"Bearer ".concat(g)}}).then(e=>{m().fire({icon:"success",title:"تم الحذف بنجاح",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=m().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),z()}).catch(e=>{if(401===e.response.status){(0,n.Z)();return}m().fire({icon:"error",title:"حدث خطأ",text:"حدث خطأ أثناء حذف الموظف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=m().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})})})},D=e=>{if(e.preventDefault(),!P){m().fire({icon:"error",title:"خطأ",text:"يرجى اختيار مستخدم لإضافته كموظف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=m().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}});return}i.Z.post("".concat(a.A,"/auth/employees/create"),{user:P.id,position:C,company_name:B},{headers:{Authorization:"Bearer ".concat(g)}}).then(e=>{m().fire({icon:"success",title:"تمت العملية بنجاح",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=m().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),k(!1),z(),E(""),_(""),S(null)}).catch(e=>{if(401===e.response.status){(0,n.Z)();return}m().fire({icon:"error",title:"حدث خطأ",text:"حدث خطأ أثناء إضافة الموظف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=m().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})})};return(0,s.jsx)(l.Z,{currentTab:"employee",children:(0,s.jsxs)("div",{className:"mx-auto p-4",dir:"rtl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-col sm:flex-row gap-4 sm:gap-6 p-3 bg-white rounded-lg shadow-md mb-4 max-w-full sm:max-w-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"الموظفين"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-indigo-500 text-white text-sm font-semibold rounded hover:bg-indigo-600 transition",onClick:()=>{k(!0),Z()},children:"إضافة موظف"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"min-h-[450px]",children:(0,s.jsxs)("table",{className:"border border-gray-300 rounded-md min-w-[1000px] w-[100%]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-indigo-600 text-white",children:[(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"#"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"#"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"اسم المستخدم"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"الدور"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"المنصب"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"الشركة"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"التفاصيل"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium",children:"الإجراءات"})]})}),(0,s.jsxs)("tbody",{children:[e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 text-center",children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:e.id}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:(0,s.jsx)("div",{className:"rounded-full overflow-hidden flex items-center justify-center",children:(0,s.jsx)("img",{src:e.user.profile_picture||"https://via.placeholder.com/40",alt:"User Profile",className:"w-10 h-10 rounded-full object-cover"})})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:e.user.username}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:e.user.role}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:e.position||"غير متوفر"}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border",children:e.company_name||"غير متوفر"}),(0,s.jsx)("td",{className:"px-4 py-2 text-center border",children:(0,s.jsx)("button",{onClick:()=>A(e.id),className:"px-3 py-1 bg-green-500 text-white text-sm font-semibold rounded hover:bg-green-600 transition mr-2",children:"تفاصيل"})}),(0,s.jsx)("td",{className:"px-4 py-2 text-center border",children:(0,s.jsx)("button",{onClick:()=>q(e.id),className:"btn btn-danger",children:(0,s.jsx)("i",{className:"bi bi-trash"})})})]},e.id)),0==e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"8",className:"text-center py-4 text-xl font-bold text-red-600 border border-red-600 rounded-md",children:"لا يوجد بيانات"})})]})]})})}),r&&x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-11/12 max-w-2xl p-6 max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-right",children:"تفاصيل المستخدم"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-blue-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"اسم المستخدم"}),(0,s.jsx)(c.Xws,{className:"text-blue-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.user.username})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-green-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"البريد الإلكتروني"}),(0,s.jsx)(c.SRX,{className:"text-green-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.user.email})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-yellow-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"الاسم الكامل"}),(0,s.jsx)(c.Xws,{className:"text-yellow-600"})]}),(0,s.jsxs)("p",{className:"text-gray-900 mt-2 text-right",children:[r.user.first_name," ",r.user.last_name]})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-purple-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"رقم الهاتف"}),(0,s.jsx)(c.I7T,{className:"text-purple-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.user.phone||"غير متوفر"})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-pink-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"الدولة"}),(0,s.jsx)(c.ssk,{className:"text-pink-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.user.country||"غير متوفر"})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-teal-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"تاريخ الميلاد"}),(0,s.jsx)(c.IiJ,{className:"text-teal-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.user.date_of_birth||"غير متوفر"})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-indigo-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"المسمى الوظيفي"}),(0,s.jsx)(c.I8D,{className:"text-indigo-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.position||"غير متوفر"})]}),(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"اسم الشركة"}),(0,s.jsx)(c.m17,{className:"text-gray-600"})]}),(0,s.jsx)("p",{className:"text-gray-900 mt-2 text-right",children:r.company_name||"غير متوفر"})]}),r.user.profile_picture&&(0,s.jsxs)("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col bg-gray-50 col-span-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-start",children:[(0,s.jsx)("p",{className:"text-gray-700 font-medium",children:"الصورة الشخصية"}),(0,s.jsx)(c.H3h,{className:"text-gray-600"})]}),(0,s.jsx)("img",{src:r.user.profile_picture,alt:"Profile",className:"rounded-lg w-48 h-48 object-cover mt-4 mx-auto border-4 border-indigo-500"})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>d(null),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition w-100",children:"إغلاق"})})]})}),O&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-11/12 max-w-3xl p-6 max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 text-center",children:"اختر مستخدم لإضافته كموظف"}),(0,s.jsxs)("form",{onSubmit:e=>D(e),children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الشركة"}),(0,s.jsx)("input",{type:"text",id:"company_name",value:B,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"مثال: Startup Inc",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-1",children:"الوظيفة"}),(0,s.jsx)("input",{type:"text",id:"position",value:C,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"مثال: Developer",required:!0})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>(0,s.jsxs)("div",{onClick:()=>S(e),className:"relative border rounded-lg p-4 shadow-sm flex flex-col items-center justify-center cursor-pointer transition-transform transform hover:scale-105 ".concat((null==r?void 0:r.id)===e.id?"border-indigo-500 bg-indigo-50":"border-gray-300"),children:[(null==P?void 0:P.id)===e.id&&(0,s.jsx)("div",{className:"absolute top-2 left-2 bg-green-500 rounded-full w-6 h-6 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden mb-4",children:e.profile_picture?(0,s.jsx)("img",{src:e.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):(0,s.jsx)("span",{className:"text-gray-500 text-xl font-bold",children:e.first_name[0]})}),(0,s.jsxs)("p",{className:"text-lg font-medium text-gray-700",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.role})]},e.id))}),(0,s.jsxs)("div",{className:"mt-6 flex justify-between gap-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-md transition w-50 ".concat(P?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),type:"submit",children:"حفظ"}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 mr-4 w-50",children:"إلغاء"})]})]})]})})]})})}},6231:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var s=r(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=s.createContext&&s.createContext(a),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(m,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var r,{attr:a,size:l,title:o}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)r=l[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,n),m=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==l?s.createElement(l.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[9461,7699,6051,3464,7823,2971,2117,1744],function(){return e(e.s=5022)}),_N_E=e.O()}]);