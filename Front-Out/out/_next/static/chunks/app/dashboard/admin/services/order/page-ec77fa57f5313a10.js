(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1926],{2195:function(e,t,s){Promise.resolve().then(s.bind(s,2278))},2278:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(7437),a=s(2265),l=s(9095),n=s(3464),i=s(1897),o=s(2623),d=s(5515),c=s.n(d),u=s(9089);function m(e){let{id:t,onClose:s}=e,[l,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?h(e):(0,o.Z)()},[]),(0,a.useEffect)(()=>{t&&g&&(async()=>{x(!0);try{let e=await n.Z.get("".concat(i.A,"/auth/get-user-details/").concat(t),{headers:{Authorization:"Bearer ".concat(g)}});d(e.data)}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401?(0,o.Z)():c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{x(!1)}})()},[t,g]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:m?"جار التحميل...":"تفاصيل المستخدم"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),m?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"جاري جلب بيانات المستخدم..."}):l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center",children:l.profile_picture?(0,r.jsx)("img",{src:l.profile_picture,alt:"".concat(l.first_name," ").concat(l.last_name),className:"w-full h-full rounded-full"}):(0,r.jsx)(u.q1E,{size:40,className:"text-gray-500"})}),(0,r.jsxs)("h3",{className:"mt-4 text-lg font-bold text-gray-700",children:[l.first_name," ",l.last_name]}),(0,r.jsx)("p",{className:"text-gray-500",children:l.role})]}),(0,r.jsxs)("div",{className:"space-y-3 text-right",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.SRX,{className:"text-green-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.email})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.I7T,{className:"text-yellow-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.phone})]}),l.country&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.Cb3,{className:"text-purple-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.country})]}),l.date_of_birth&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.IiJ,{className:"text-red-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:new Date(l.date_of_birth).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})})]}),l.username&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.Xws,{className:"text-blue-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.username})]})]})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-full",children:"إغلاق"})})]})}):null}function x(e){let{id:t,onClose:s}=e,[l,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?h(e):(0,o.Z)()},[]),(0,a.useEffect)(()=>{t&&g&&(async()=>{x(!0);try{let e=await n.Z.get("".concat(i.A,"/auth/employees/").concat(t),{headers:{Authorization:"Bearer ".concat(g)}});d(e.data)}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401?(0,o.Z)():c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{x(!1)}})()},[t,g]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:m?"جار التحميل...":"تفاصيل الموظف"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),m?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"جاري جلب بيانات الموظف..."}):l&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"space-y-3 text-right",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center",children:l.user.profile_picture?(0,r.jsx)("img",{src:l.user.profile_picture,alt:"".concat(l.user.first_name," ").concat(l.user.last_name),className:"w-full h-full rounded-full"}):(0,r.jsx)(u.q1E,{size:40,className:"text-gray-500"})}),(0,r.jsxs)("h3",{className:"mt-4 text-lg font-bold text-gray-700",children:[l.user.first_name," ",l.user.last_name]}),(0,r.jsx)("p",{className:"text-gray-500",children:l.user.role})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.SRX,{className:"text-green-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.user.email})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.I7T,{className:"text-yellow-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.user.phone})]}),l.user.country&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.Cb3,{className:"text-purple-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.user.country})]}),l.user.date_of_birth&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.IiJ,{className:"text-red-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:new Date(l.user.date_of_birth).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.I8D,{className:"text-blue-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.position})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(u.m17,{className:"text-purple-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.company_name})]})]})}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-full",children:"إغلاق"})})]})}):null}function g(e){let{orderId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)([]),[x,g]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,o.Z)()},[]),(0,a.useEffect)(()=>{b&&y()},[b,t]);let y=async()=>{if(t&&b){p(!0);try{let e=await n.Z.get("".concat(i.A,"/auth/employees"),{headers:{Authorization:"Bearer ".concat(b)}});m(e.data)}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401?(0,o.Z)():c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}}},j=async()=>{if(!x){c().fire({icon:"warning",title:"يرجى اختيار موظف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#f7b924")}});return}p(!0);try{await n.Z.put("".concat(i.A,"/services/orders/assign-employee/").concat(t),{employee_id:x},{headers:{Authorization:"Bearer ".concat(b)}}),c().fire({icon:"success",text:"تم تغيير الموظف بنجاح",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),s()}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401?(0,o.Z)():c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تغيير موظف الطلب"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"orderId",className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الطلب"}),(0,r.jsx)("input",{id:"orderId",type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:t,disabled:!0})]}),h?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"جاري جلب الموظفين..."}):d.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"employeeSelect",className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر موظفاً"}),(0,r.jsxs)("select",{id:"employeeSelect",value:x,onChange:e=>g(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"اختر موظفاً"}),d.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.user.first_name," ",e.user.last_name," (",e.user.role,")"]},e.id))]})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between gap-4",children:[(0,r.jsx)("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-1/2",disabled:h,children:h?"جارٍ التحديث...":"تغيير الموظف"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 hover:text-gray-800 w-1/2",children:"إغلاق"})]})]})}):null}function h(e){let{orderId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?p(e):(0,o.Z)()},[]);let b=async()=>{if(!d){c().fire({icon:"warning",text:"يرجى اختيار حالة الطلب",timer:1500,showConfirmButton:!1,timerProgressBar:!0});return}g(!0);try{await n.Z.patch("".concat(i.A,"/services/orders/update/").concat(t),{status:"".concat(d)},{headers:{Authorization:"Bearer ".concat(h)}}),c().fire({icon:"success",text:"تم تحديث حالة الطلب بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{g(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تغيير حالة الطلب"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"orderStatus",className:"block text-sm font-medium text-gray-700",children:"اختر حالة الطلب"}),(0,r.jsxs)("select",{id:"orderStatus",value:d,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"اختر حالة"}),(0,r.jsx)("option",{value:"new",children:"جديد"}),(0,r.jsx)("option",{value:"in_progress",children:"قيد التنفيذ"}),(0,r.jsx)("option",{value:"completed",children:"مكتمل"})]})]})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between gap-4",children:[(0,r.jsx)("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-50",disabled:x,children:x?"جارٍ التحديث...":"تحديث الحالة"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 w-50",children:"إغلاق"})]})]})}):null}function p(e){let{stepId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?p(e):(0,o.Z)()},[]);let b=async()=>{if(!d){c().fire({icon:"warning",text:"يرجى اختيار حالة الدفع",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#f59e0b")}});return}g(!0);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update/manager-admin"),{payment_status:d},{headers:{Authorization:"Bearer ".concat(h)}}),c().fire({icon:"success",title:"تم تحديث حالة الدفع بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),s()}catch(e){c().fire({icon:"error",title:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")},willClose:()=>{s()}})}finally{g(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تغيير حالة الدفع"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"paymentStatus",className:"block text-sm font-medium text-gray-700",children:"اختر حالة الدفع"}),(0,r.jsxs)("select",{id:"paymentStatus",value:d,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"اختر حالة الدفع"}),(0,r.jsx)("option",{value:"unpaid",children:"غير مدفوع"}),(0,r.jsx)("option",{value:"in_progress",children:"جاري التنفيذ"}),(0,r.jsx)("option",{value:"paid",children:"مدفوع"})]})]})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-100 mb-3",disabled:x,children:x?"جارٍ التحديث...":"تحديث حالة الدفع"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 w-100",children:"إغلاق"})]})]})}):null}function b(e){let{stepId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?p(e):(0,o.Z)()},[]);let b=async()=>{if(!d){c().fire({icon:"warning",text:"يرجى اختيار حالة الخطوة",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#f59e0b")}});return}g(!0);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update/manager-admin"),{status:d},{headers:{Authorization:"Bearer ".concat(h)}}),c().fire({icon:"success",text:"تم تحديث حالة الخطوة بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{g(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تغيير حالة الخطوة"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stepStatus",className:"block text-sm font-medium text-gray-700",children:"اختر حالة الخطوة"}),(0,r.jsxs)("select",{id:"stepStatus",value:d,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"اختر حالة الخطوة"}),(0,r.jsx)("option",{value:"pending",children:"معلق"}),(0,r.jsx)("option",{value:"in_progress",children:"جاري التنفيذ"}),(0,r.jsx)("option",{value:"completed",children:"مكتمل"})]})]})}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-100 mb-3",disabled:x,children:x?"جارٍ التحديث...":"تحديث حالة الخطوة"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 w-100",children:"إغلاق"})]})]})}):null}function f(e){let{stepId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,o.Z)()},[]);let y=()=>{m(""),g(null)},j=async()=>{if(!d&&!x){c().fire({icon:"warning",text:"يرجى إدخال بيانات أو تحميل ملف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#ffaa2c")}});return}p(!0);let e=new FormData;d&&e.append("requirements_data_from_user",d),x&&e.append("files",x);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update/manager-admin"),e,{headers:{Authorization:"Bearer ".concat(b)}}),c().fire({icon:"success",text:"تم تحديث المتطلبات بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),y(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-[40rem] p-6 overflow-y-auto max-h-[70vh]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"متطلبات الموظف"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"requirementsData",className:"block text-sm font-medium text-gray-700 mb-2",children:"البيانات المطلوبة"}),(0,r.jsx)("textarea",{id:"requirementsData",value:d,onChange:e=>{m(e.target.value)},className:"mt-1 block w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"أدخل البيانات هنا"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"requirementsFile",className:"block text-sm font-medium text-gray-700 mb-2",children:"تحميل ملف"}),(0,r.jsx)("input",{id:"requirementsFile",type:"file",onChange:e=>{g(e.target.files[0])},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center gap-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 md:w-50 w-full",disabled:h,children:h?"جارٍ التحديث...":"تحديث المتطلبات"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 md:w-50 w-full",children:"إغلاق"})]})]})}):null}function y(e){let{stepid:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,o.Z)()},[]);let y=()=>{m(""),g(null)},j=async()=>{if(!d&&!x){c().fire({icon:"warning",text:"يرجى إدخال بيانات أو تحميل ملف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#ffaa2c")}});return}p(!0);let e=new FormData;d&&e.append("data_req_user",d),x&&e.append("data_user_file_upload",x);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update/manager-admin"),e,{headers:{Authorization:"Bearer ".concat(b),"Content-Type":"multipart/form-data"}}),c().fire({icon:"success",text:"تم تحميل البيانات بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),y(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-[40rem] p-6 overflow-y-auto max-h-[70vh]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تحميل بيانات المستخدم"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dataReqUser",className:"block text-sm font-medium text-gray-700 mb-2",children:"إدخال البيانات"}),(0,r.jsx)("textarea",{id:"dataReqUser",value:d,onChange:e=>{m(e.target.value)},className:"mt-1 block w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"أدخل البيانات هنا"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dataUserFileUpload",className:"block text-sm font-medium text-gray-700 mb-2",children:"تحميل ملف البيانات"}),(0,r.jsx)("input",{id:"dataUserFileUpload",type:"file",onChange:e=>{g(e.target.files[0])},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center gap-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600  md:w-full lg:w-50",disabled:h,children:h?"جارٍ التحديث...":"تحميل البيانات"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 md:w-full lg:w-50",children:"إغلاق"})]})]})}):null}function j(e){let{stepId:t,onClose:s,refreshData:l}=e,[d,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,o.Z)()},[]);let y=()=>{m(""),g(null)},j=async()=>{if(!d&&!x){c().fire({icon:"warning",text:"يرجى إدخال نص أو تحميل ملف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#ffaa2c")}});return}p(!0);let e=new FormData;d&&e.append("step_result_text",d),x&&e.append("step_result_file",x);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update/manager-admin"),e,{headers:{Authorization:"Bearer ".concat(b)}}),c().fire({icon:"success",text:"تم تحديث نتيجة الخطوة بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),y(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-[40rem] p-6 overflow-y-auto max-h-[70vh]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تحديث نتيجة الخطوة"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(u.aHS,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stepResultText",className:"block text-sm font-medium text-gray-700 mb-2",children:"نص نتيجة الخطوة"}),(0,r.jsx)("textarea",{id:"stepResultText",value:d,onChange:e=>{m(e.target.value)},className:"mt-1 block w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"أدخل النص هنا"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"stepResultFile",className:"block text-sm font-medium text-gray-700 mb-2",children:"تحميل ملف نتيجة الخطوة"}),(0,r.jsx)("input",{id:"stepResultFile",type:"file",onChange:e=>{g(e.target.files[0])},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center gap-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 md:w-50 w-full",disabled:h,children:h?"جارٍ التحديث...":"تحديث النتيجة"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 md:w-50 w-full",children:"إغلاق"})]})]})}):null}function v(){let[e,t]=(0,a.useState)(null),[s,d]=(0,a.useState)(null),[u,v]=(0,a.useState)(null),[w,N]=(0,a.useState)([]),[k,S]=(0,a.useState)(w.flatMap(e=>e.steps));(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?v(e):(0,o.Z)()},[]);let _=async()=>{n.Z.get("".concat(i.A,"/services/orders"),{headers:{Authorization:"Bearer ".concat(u)}}).then(e=>{N(e.data),S(e.data.flatMap(e=>e.steps))}).catch(e=>{401===e.response.status?(0,o.Z)():(N([]),S([]),c().fire({icon:"error",title:"حدث خطأ ما!",text:"حدث خطأ ما أثناء جلب البيانات. الرجاء المحاولة مرة أخرى.",confirmButtonText:"حسناً"}))})};(0,a.useEffect)(()=>{u&&_()},[u]);let C=s=>{t(s===e?null:s)},B=e=>{d(e===s?null:e)},P=e=>{window.open(e,"_blank")},O=()=>{_()},[q,z]=(0,a.useState)(null),[E,Z]=(0,a.useState)(null),[F,A]=(0,a.useState)(null),[D,I]=(0,a.useState)(null),[H,T]=(0,a.useState)(null),[R,L]=(0,a.useState)(null),[U,M]=(0,a.useState)(null),[X,G]=(0,a.useState)(""),[J,V]=(0,a.useState)(null),W=e=>{c().fire({title:"هل أنت متأكد؟",text:"لن تتمكن من التراجع عن هذا الإجراء!",icon:"تحذير",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"نعم, احذفها!"}).then(t=>{t.isConfirmed&&n.Z.delete("".concat(i.A,"/services/orders/delete/").concat(e),{headers:{Authorization:"Bearer ".concat(u)}}).then(()=>{c().fire("تم!","تم حذف الطلب بنجاح.","success")}).catch(e=>{c().fire("خطأ!","حدث خطأ ما أثناء حذف الطلب.","error")})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{currentTab:"order",children:(0,r.jsxs)("div",{className:"sm:mt-9 md:mt-9 lg:mt-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6 flex-col md:flex-row",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4 lg:mb-0",children:"الطلبات"}),(0,r.jsx)("button",{onClick:_,className:"px-6 py-3 bg-gradient-to-r from-teal-400 to-teal-500 text-white text-lg font-medium rounded-lg shadow-md hover:opacity-90 transition-all duration-300",children:"إعادة تحميل البيانات"})]}),w.map(t=>(0,r.jsxs)("div",{className:"mb-4 bg-white text-gray-900 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-300",children:[(0,r.jsxs)("button",{onClick:()=>C(t.id),className:"w-full text-left p-4 flex justify-between items-center border-b border-gray-200 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-white bg-blue-500 rounded px-2 py-1 ml-2",children:t.id}),(0,r.jsx)("span",{className:"text-lg font-medium",children:t.service.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"inline-block text-md px-3 py-1 rounded-full font-medium ".concat("new"===t.status?"bg-red-100 text-red-600":"in_progress"===t.status?"bg-blue-100 text-blue-600":"completed"===t.status?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:"new"===t.status?"جديد":"in_progress"===t.status?"قيد التنفيذ":"completed"===t.status?"مكتمل":"غير محدد"}),(0,r.jsx)("span",{children:e===t.service.id?"▲":"▼"})]})]}),e===t.id&&(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsx)("div",{className:"mb-8 bg-gray-50 p-3 rounded-xl shadow-md",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"mb-2 bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"إجمالي السعر:"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:t.service.total_price})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-3",children:"معلومات العميل"}),(0,r.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[t.user.first_name," ",t.user.last_name]}),(0,r.jsx)("button",{onClick:()=>z(t.user.id),className:"bg-blue-500 text-white text-sm font-medium py-2 px-4 rounded hover:bg-blue-600 transition-colors duration-200",children:"عرض التفاصيل"})]})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"الموظف المعين:"}),t.assigned_employee?(0,r.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[t.assigned_employee.user.first_name," ",t.assigned_employee.user.last_name]}),(0,r.jsx)("button",{onClick:()=>Z(t.assigned_employee.id),className:"bg-blue-500 text-white text-sm font-medium py-2 px-4 rounded hover:bg-blue-600 transition-colors duration-200",children:"عرض التفاصيل"}),"completed"!=t.status&&(0,r.jsx)("button",{onClick:()=>A(t.id),className:"bg-yellow-500 text-white text-sm font-medium py-2 px-4 rounded hover:bg-yellow-600 transition-colors duration-200",children:"تغيير الموظف"})]}):(0,r.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"لا يوجد موظف معين"}),(0,r.jsx)("button",{onClick:()=>A(t.id),className:"bg-green-500 text-white text-sm font-medium py-2 px-4 rounded hover:bg-green-600 transition-colors duration-200",children:"إضافة موظف"})]})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"حالة الطلب"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"inline-block text-md px-3 py-1 rounded-full font-medium ".concat("new"===t.status?"bg-red-100 text-red-600":"in_progress"===t.status?"bg-blue-100 text-blue-600":"completed"===t.status?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:"new"===t.status?"جديد":"in_progress"===t.status?"قيد التنفيذ":"completed"===t.status?"مكتمل":"غير محدد"}),"completed"!=t.status&&(0,r.jsx)("button",{onClick:()=>I(t.id),className:"ml-4 text-sm font-medium py-2 px-4 rounded transition-colors duration-200 ".concat("new"===t.status?"bg-red-500 text-white hover:bg-red-600":"in_progress"===t.status?"bg-blue-500 text-white hover:bg-blue-600":"completed"===t.status?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white hover:bg-gray-600"),children:"تعديل الحالة"})]})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"تاريخ الإنشاء"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(t.created_at).toLocaleDateString()," ",new Date(t.created_at).toLocaleTimeString()]})]})]})}),t.steps.map(e=>(0,r.jsxs)("div",{className:"mb-4 bg-blue-50 rounded-md shadow-md hover:bg-blue-100",children:[(0,r.jsxs)("button",{onClick:()=>B(e.id),className:"w-full flex justify-between items-center text-left text-gray-800 hover:bg-blue-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg font-medium",children:e.name}),(0,r.jsx)("span",{className:"ml-2 px-3 py-1 text-white text-xs font-semibold rounded-full ".concat("pending"===e.status?"bg-gray-500":"in_progress"===e.status?"bg-blue-500":"bg-green-500"),children:"pending"===e.status?"قيد الانتظار":"in_progress"===e.status?"قيد التنفيذ":"مكتمل"})]}),(0,r.jsx)("span",{children:s===e.id?"▲":"▼"})]}),s===e.id&&(0,r.jsxs)("div",{className:"mt-3 space-y-4 p-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"الحالة:"}),(0,r.jsx)("p",{className:"".concat("pending"===e.status?"text-yellow-600":"in_progress"===e.status?"text-blue-600":"completed"===e.status?"text-green-600":"text-gray-600"),children:"pending"===e.status?"قيد الانتظار":"in_progress"===e.status?"قيد التنفيذ":"completed"===e.status?"مكتمل":"غير محدد"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"حالة الدفع:"}),(0,r.jsx)("p",{className:"".concat("unpaid"===e.payment_status?"text-red-600":"paid"===e.payment_status?"text-green-600":"in_progress"===e.payment_status?"text-blue-600":"text-gray-600"),children:"unpaid"===e.payment_status?"غير مدفوع":"paid"===e.payment_status?"مدفوع":"in_progress"===e.payment_status?"قيد التنفيذ":"غير محدد"})]})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"سعر الخطوة:"}),(0,r.jsxs)("p",{className:"text-sm text-gray-800",children:[e.step_price," $"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"وصف الخطوة:"}),(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.step_description})]})]})]}),"completed"!=t.status&&(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:["paid"!=e.payment_status?(0,r.jsx)("button",{onClick:()=>T(e.id),className:"bg-blue-500 text-white hover:bg-blue-600 py-2 px-4 border border-blue-500 rounded-md",children:"تحديث حالة الدفع"}):null,"completed"!=e.status?(0,r.jsx)("button",{onClick:()=>L(e.id),className:"bg-green-500 text-white hover:bg-green-600 py-2 px-4 border border-green-500 rounded-md",children:"تحديث الحالة"}):null]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-800",children:"المتطلبات"}),(0,r.jsx)("p",{className:"text-sm mb-4 text-gray-700",children:e.requirements_data_from_user?e.requirements_data_from_user:"لا توجد بيانات متوفرة"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[e.files?(0,r.jsxs)("button",{onClick:()=>P(e.files),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح الملف"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا توجد ملفات متوفرة"}),"completed"!=t.status&&(0,r.jsx)(r.Fragment,{children:"paid"!==e.payment_status||"completed"!==e.status?(0,r.jsx)("button",{onClick:()=>M(e.id),className:"bg-green-500 text-white hover:bg-green-600 py-2 px-4 rounded-md transition-colors duration-200",children:"تحديث المتطلبات"}):null})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:bg-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-700",children:"بيانات من المستخدم"}),(0,r.jsx)("p",{className:"text-sm mb-2",children:e.data_req_user?e.data_req_user:"لا توجد بيانات مرفقة"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 gap-4 flex-wrap",children:[e.data_user_file_upload?(0,r.jsxs)("button",{onClick:()=>P(e.data_user_file_upload),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح الملف"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا يوجد ملف مرفق"}),"completed"!=t.status&&(0,r.jsx)(r.Fragment,{children:"paid"!==e.payment_status||"completed"!==e.status?(0,r.jsx)("button",{onClick:()=>G(e.id),className:"flex items-center bg-green-500 text-white hover:bg-green-600 py-2 px-6 border border-green-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:"تحديث البيانات"}):null})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:bg-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-700",children:"نتائج الخطوة"}),(0,r.jsx)("p",{className:"text-sm mb-2",children:e.step_result_text?e.step_result_text:"لا توجد نتائج مرفقة"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 gap-4 flex-wrap",children:[e.step_result_file?(0,r.jsxs)("button",{onClick:()=>P(e.step_result_file),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح النتيجة"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا يوجد نتيجة مرفقة"}),"completed"!=t.status&&(0,r.jsx)(r.Fragment,{children:"paid"!==e.payment_status||"completed"!==e.status?(0,r.jsx)("button",{onClick:()=>V(e.id),className:"flex items-center bg-green-500 text-white hover:bg-green-600 py-2 px-6 border border-green-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:"تحديث النتيجة"}):null})]})]})]})]},e.id)),(0,r.jsx)("button",{onClick:()=>W(t.id),className:"bg-red-500 text-white hover:bg-red-600 py-2 px-4 border border-blue-500 rounded-md mt-4",children:"حذف الطلب"})]})]},t.id)),0===w.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gray-50 rounded-lg shadow-lg border border-gray-200 p-6",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11m4 4H3m0 4h14a1 1 0 001-1v-2a1 1 0 00-1-1H3m0-4h7a1 1 0 001-1V7a1 1 0 00-1-1H3m0 0a1 1 0 00-1 1v10a1 1 0 001 1h14a1 1 0 001-1V7a1 1 0 00-1-1H3z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"لا توجد طلبات"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 text-center max-w-md",children:"يبدو أنه ليس لديك أي طلبات حالياً. يمكنك العودة لاحقاً لمراجعة الطلبات الجديدة."})]})]})}),(0,r.jsx)(m,{id:q,onClose:()=>z(null)}),(0,r.jsx)(x,{id:E,onClose:()=>Z(null)}),(0,r.jsx)(g,{orderId:F,onClose:()=>A(null),refreshData:O}),(0,r.jsx)(h,{orderId:D,onClose:()=>I(null),refreshData:O}),(0,r.jsx)(p,{stepId:H,onClose:()=>T(null),refreshData:O}),(0,r.jsx)(b,{stepId:R,onClose:()=>L(null),refreshData:O}),(0,r.jsx)(f,{stepId:U,onClose:()=>M(null),refreshData:O}),(0,r.jsx)(y,{stepid:X,onClose:()=>G(null),refreshData:O}),(0,r.jsx)(j,{stepId:J,onClose:()=>V(null),refreshData:O})]})}},6231:function(e,t,s){"use strict";s.d(t,{w_:function(){return c}});var r=s(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach(function(t){var r,a;r=t,a=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function c(e){return t=>r.createElement(u,i({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,s)=>r.createElement(t.tag,d({key:s},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var s,{attr:a,size:l,title:o}=e,c=function(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)s=l[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}(e,n),u=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:s,style:d(d({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[9461,7699,6051,3464,7823,2971,2117,1744],function(){return e(e.s=2195)}),_N_E=e.O()}]);