(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4664],{4330:function(e,t,s){Promise.resolve().then(s.bind(s,4862))},1897:function(e,t,s){"use strict";s.d(t,{A:function(){return r}});let r="https://lmboost.com/backend/api"},4862:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),l=s(3355),n=s(3464),i=s(1897),o=s(2623),d=s(5515),c=s.n(d),m=s(9089);function u(e){let{id:t,onClose:s}=e,[l,d]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?h(e):(0,o.Z)()},[]),(0,a.useEffect)(()=>{t&&g&&(async()=>{x(!0);try{let e=await n.Z.get("".concat(i.A,"/auth/get-user-details/").concat(t),{headers:{Authorization:"Bearer ".concat(g)}});d(e.data)}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401?(0,o.Z)():c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{x(!1)}})()},[t,g]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-96 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:u?"جار التحميل...":"تفاصيل المستخدم"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(m.aHS,{size:20})})]}),u?(0,r.jsx)("div",{className:"text-center text-gray-500",children:"جاري جلب بيانات المستخدم..."}):l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center",children:l.profile_picture?(0,r.jsx)("img",{src:l.profile_picture,alt:"".concat(l.first_name," ").concat(l.last_name),className:"w-full h-full rounded-full"}):(0,r.jsx)(m.q1E,{size:40,className:"text-gray-500"})}),(0,r.jsxs)("h3",{className:"mt-4 text-lg font-bold text-gray-700",children:[l.first_name," ",l.last_name]}),(0,r.jsx)("p",{className:"text-gray-500",children:l.role})]}),(0,r.jsxs)("div",{className:"space-y-3 text-right",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(m.SRX,{className:"text-green-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.email})]}),(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(m.I7T,{className:"text-yellow-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.phone})]}),l.country&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(m.Cb3,{className:"text-purple-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.country})]}),l.date_of_birth&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(m.IiJ,{className:"text-red-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:new Date(l.date_of_birth).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})})]}),l.username&&(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)(m.Xws,{className:"text-blue-500 ml-3"}),(0,r.jsx)("span",{className:"text-gray-700",children:l.username})]})]})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 w-full",children:"إغلاق"})})]})}):null}function x(e){let{stepid:t,onClose:s,refreshData:l}=e,[d,u]=(0,a.useState)(""),[x,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?b(e):(0,o.Z)()},[]);let j=()=>{u(""),g(null)},y=async()=>{if(!d&&!x){c().fire({icon:"warning",text:"يرجى إدخال بيانات أو تحميل ملف",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#ffaa2c")}});return}p(!0);let e=new FormData;d&&e.append("data_req_user",d),x&&e.append("data_user_file_upload",x);try{await n.Z.patch("".concat(i.A,"/services/orders/steps/").concat(t,"/update"),e,{headers:{Authorization:"Bearer ".concat(f),"Content-Type":"multipart/form-data"}}),c().fire({icon:"success",text:"تم تحميل البيانات بنجاح",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#16a34a")}}),l(),j(),s()}catch(e){c().fire({icon:"error",text:"حدث خطأ ما، يرجى المحاولة مرة أخرى",timer:1500,showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")}})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",dir:"rtl",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-[40rem] p-6 overflow-y-auto max-h-[70vh]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"تحميل بيانات المستخدم"}),(0,r.jsx)("button",{onClick:s,className:"text-white bg-red-500 p-1 rounded-full hover:bg-red-600",children:(0,r.jsx)(m.aHS,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dataReqUser",className:"block text-sm font-medium text-gray-700 mb-2",children:"إدخال البيانات"}),(0,r.jsx)("textarea",{id:"dataReqUser",value:d,onChange:e=>{u(e.target.value)},className:"mt-1 block w-full h-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"أدخل البيانات هنا"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dataUserFileUpload",className:"block text-sm font-medium text-gray-700 mb-2",children:"تحميل ملف البيانات"}),(0,r.jsx)("input",{id:"dataUserFileUpload",type:"file",onChange:e=>{g(e.target.files[0])},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center gap-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:y,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600  md:w-full lg:w-50",disabled:h,children:h?"جارٍ التحديث...":"تحميل البيانات"}),(0,r.jsx)("button",{onClick:s,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 md:w-full lg:w-50",children:"إغلاق"})]})]})}):null}function g(){let[e,t]=(0,a.useState)(null),[s,d]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[h,p]=(0,a.useState)([]),[f,b]=(0,a.useState)(h.flatMap(e=>e.steps));(0,a.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?g(e):(0,o.Z)()},[]);let j=async()=>{n.Z.get("".concat(i.A,"/services/orders/my-orders"),{headers:{Authorization:"Bearer ".concat(m)}}).then(e=>{p(e.data),b(e.data.flatMap(e=>e.steps))}).catch(e=>{401===e.response.status?(0,o.Z)():(p([]),b([]),c().fire({icon:"error",title:"حدث خطأ ما!",text:"حدث خطأ ما أثناء جلب البيانات. الرجاء المحاولة مرة أخرى.",confirmButtonText:"حسناً"}))})};(0,a.useEffect)(()=>{m&&j()},[m]);let y=s=>{t(s===e?null:s)},v=e=>{d(e===s?null:e)},w=e=>{window.open(e,"_blank")},[N,_]=(0,a.useState)(null),[k,S]=(0,a.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{currentTab:"orders",children:(0,r.jsxs)("div",{className:"sm:mt-9 md:mt-9 lg:mt-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6 flex-col md:flex-row md:items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4 md:mb-0",children:"طلباتي"}),(0,r.jsx)("button",{onClick:j,className:"px-6 py-3 bg-gradient-to-r from-teal-400 to-teal-500 text-white text-lg font-medium rounded-lg shadow-md hover:opacity-90 transition-all duration-300",children:"إعادة تحميل البيانات"})]}),h.map(t=>(0,r.jsxs)("div",{className:"mb-4 bg-white text-gray-900 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-300",children:[(0,r.jsxs)("button",{onClick:()=>y(t.id),className:"w-full text-left p-4 flex justify-between items-center border-b border-gray-200 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-white bg-blue-500 rounded px-2 py-1 ml-2",children:t.id}),(0,r.jsx)("span",{className:"text-lg font-medium",children:t.service.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"inline-block text-md px-3 py-1 rounded-full font-medium ".concat("new"===t.status?"bg-red-100 text-red-600":"in_progress"===t.status?"bg-blue-100 text-blue-600":"completed"===t.status?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:"new"===t.status?"جديد":"in_progress"===t.status?"قيد التنفيذ":"completed"===t.status?"مكتمل":"غير محدد"}),(0,r.jsx)("span",{children:e===t.service.id?"▲":"▼"})]})]}),e===t.id&&(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsx)("div",{className:"mb-8 bg-gray-50 p-3 rounded-xl shadow-md",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"mb-2 bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"إجمالي السعر:"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:t.service.total_price})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-3",children:"معلومات العميل"}),(0,r.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:[t.user.first_name," ",t.user.last_name]}),(0,r.jsx)("button",{onClick:()=>_(t.user.id),className:"bg-blue-500 text-white text-sm font-medium py-2 px-4 rounded hover:bg-blue-600 transition-colors duration-200",children:"عرض التفاصيل"})]})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"الموظف المعين:"}),t.assigned_employee?(0,r.jsx)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:(0,r.jsxs)("p",{className:"text-gray-700",children:[t.assigned_employee.user.first_name," ",t.assigned_employee.user.last_name]})}):(0,r.jsx)("p",{className:"text-gray-500",children:"لم يتم تعيين موظف بعد"})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"حالة الطلب"}),(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("span",{className:"inline-block text-md px-3 py-1 rounded-full font-medium ".concat("new"===t.status?"bg-red-100 text-red-600":"in_progress"===t.status?"bg-blue-100 text-blue-600":"completed"===t.status?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:"new"===t.status?"جديد":"in_progress"===t.status?"قيد التنفيذ":"completed"===t.status?"مكتمل":"غير محدد"})})]}),(0,r.jsxs)("div",{className:"mb-2 bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"تاريخ الإنشاء"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(t.created_at).toLocaleDateString()," ",new Date(t.created_at).toLocaleTimeString()]})]})]})}),t.steps.map(e=>(0,r.jsxs)("div",{className:"mb-4 bg-blue-50 rounded-md shadow-md hover:bg-blue-100",children:[(0,r.jsxs)("button",{onClick:()=>v(e.id),className:"w-full flex justify-between items-center text-left text-gray-800 hover:bg-blue-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg font-medium",children:e.name}),(0,r.jsx)("span",{className:"ml-2 px-3 py-1 text-white text-xs font-semibold rounded-full ".concat("pending"===e.status?"bg-gray-500":"in_progress"===e.status?"bg-blue-500":"bg-green-500"),children:"pending"===e.status?"قيد الانتظار":"in_progress"===e.status?"قيد التنفيذ":"مكتمل"})]}),(0,r.jsx)("span",{children:s===e.id?"▲":"▼"})]}),s===e.id&&(0,r.jsxs)("div",{className:"mt-3 space-y-4 p-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"الحالة:"}),(0,r.jsx)("p",{className:"".concat("pending"===e.status?"text-yellow-600":"in_progress"===e.status?"text-blue-600":"completed"===e.status?"text-green-600":"text-gray-600"),children:"pending"===e.status?"قيد الانتظار":"in_progress"===e.status?"قيد التنفيذ":"completed"===e.status?"مكتمل":"غير محدد"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"حالة الدفع:"}),(0,r.jsx)("p",{className:"".concat("unpaid"===e.payment_status?"text-red-600":"paid"===e.payment_status?"text-green-600":"in_progress"===e.payment_status?"text-blue-600":"text-gray-600"),children:"unpaid"===e.payment_status?"غير مدفوع":"paid"===e.payment_status?"مدفوع":"in_progress"===e.payment_status?"قيد التنفيذ":"غير محدد"})]})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"سعر الخطوة:"}),(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.step_price})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-gray-700 font-semibold",children:"وصف الخطوة:"}),(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.step_description})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-800",children:"المتطلبات"}),(0,r.jsx)("p",{className:"text-sm mb-4 text-gray-700",children:e.requirements_data_from_user?e.requirements_data_from_user:"لا توجد بيانات متوفرة"}),(0,r.jsx)("div",{className:"flex items-center gap-4 flex-wrap",children:e.files?(0,r.jsxs)("button",{onClick:()=>w(e.files),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح الملف"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا توجد ملفات متوفرة"})})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:bg-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-700",children:"بيانات من المستخدم"}),(0,r.jsx)("p",{className:"text-sm mb-2",children:e.data_req_user?e.data_req_user:"لا توجد بيانات مرفقة"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 gap-4 flex-wrap",children:[e.data_user_file_upload?(0,r.jsxs)("button",{onClick:()=>w(e.data_user_file_upload),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح الملف"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا يوجد ملف مرفق"}),"completed"!=t.status&&(0,r.jsx)(r.Fragment,{children:"paid"!==e.payment_status||"completed"!==e.status?(0,r.jsx)("button",{onClick:()=>S(e.id),className:"flex items-center bg-green-500 text-white hover:bg-green-600 py-2 px-6 border border-green-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:"تحديث البيانات"}):null})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:bg-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2 text-gray-700",children:"نتائج الخطوة"}),(0,r.jsx)("p",{className:"text-sm mb-2",children:e.step_result_text?e.step_result_text:"لا توجد نتائج مرفقة"}),(0,r.jsx)("div",{className:"flex items-center space-x-4 gap-4 flex-wrap",children:e.step_result_file?(0,r.jsxs)("button",{onClick:()=>w(e.step_result_file),className:"flex items-center bg-indigo-500 text-white hover:bg-indigo-600 py-2 px-6 border border-indigo-500 rounded-lg transition-transform duration-200 transform hover:scale-105",children:[(0,r.jsx)("i",{className:"bi bi-file-earmark-arrow-down h-5 w-5 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"فتح النتيجة"})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"لا يوجد نتيجة مرفقة"})})]})]})]},e.id))]})]},t.id)),0===h.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gray-50 rounded-lg shadow-lg border border-gray-200 p-6",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11m4 4H3m0 4h14a1 1 0 001-1v-2a1 1 0 00-1-1H3m0-4h7a1 1 0 001-1V7a1 1 0 00-1-1H3m0 0a1 1 0 00-1 1v10a1 1 0 001 1h14a1 1 0 001-1V7a1 1 0 00-1-1H3z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"لا توجد طلبات"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 text-center max-w-md",children:"يبدو أنه ليس لديك أي طلبات حالياً. يمكنك العودة لاحقاً لمراجعة الطلبات الجديدة."})]})]})}),(0,r.jsx)(u,{id:N,onClose:()=>_(null)}),(0,r.jsx)(x,{stepid:k,onClose:()=>S(null),refreshData:()=>{j()}})]})}},2623:function(e,t,s){"use strict";var r=s(5515),a=s.n(r);t.Z=()=>{a().fire({icon:"error",title:"Unauthorized",text:"You are not authorized to perform this action",timer:2e3,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=a().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#d33")},willClose:()=>{localStorage.removeItem("wasl-token"),window.location.href="/auth/signin"}})}},3355:function(e,t,s){"use strict";var r=s(7437),a=s(1897),l=s(2623),n=s(3464),i=s(2265),o=s(9089),d=s(5515),c=s.n(d);t.Z=e=>{let{children:t,currentTab:s}=e,[d,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[g,h]=(0,i.useState)({}),[p,f]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=localStorage.getItem("wasl-token");e?f(e):(0,l.Z)()},[]),(0,i.useEffect)(()=>{p&&n.Z.get("".concat(a.A,"/auth/get-user-data"),{headers:{Authorization:"Bearer ".concat(p)}}).then(e=>{h(e.data)}).catch(e=>{c().fire({icon:"error",title:"Please Login Again",text:"Your Session has been expired",timer:2e3,showConfirmButton:!1,showCancelButton:!1,timerProgressBar:!0,didOpen:()=>{var e;let t=null===(e=c().getPopup())||void 0===e?void 0:e.querySelector(".swal2-timer-progress-bar");t&&(t.style.background="#ef4444")},willClose:()=>{localStorage.removeItem("wasl-token"),window.location.href="/auth/signin"}})})},[p]),(0,i.useEffect)(()=>{let e=e=>{!e.target.closest(".sidebar")&&d&&(m(!1),x(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]);let b=e=>s===e?"bg-indigo-600":"";return(0,r.jsxs)("div",{className:"flex",dir:"rtl",children:[d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-20",onClick:()=>{m(!1),x(!1)}}),(0,r.jsxs)("div",{className:"sidebar fixed right-0 top-0 h-full bg-gray-800 text-gray-200 w-64 transition-transform duration-300 transform z-30 ".concat(d?"translate-x-0":"translate-x-full"," lg:translate-x-0 shadow-xl max-h-screen overflow-y-auto scrollbar-custom"),children:[(0,r.jsx)("div",{className:"absolute top-4 right-4 lg:hidden",children:(0,r.jsx)("button",{onClick:()=>{m(!1),x(!1)},className:"text-gray-200 p-2 bg-indigo-600 rounded-full transition duration-300",children:(0,r.jsx)(o.aHS,{})})}),(0,r.jsx)("div",{className:"flex justify-between items-center p-4 mt-8 bg-gray-800 rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("img",{src:(null==g?void 0:g.profile_picture)||"https://placehold.it/100x100",alt:"User profile",className:"w-16 h-16 rounded-full object-cover border-2 border-indigo-500"}),(0,r.jsxs)("div",{className:"me-2",children:[(0,r.jsxs)("span",{className:"text-sm font-semibold",children:[null==g?void 0:g.first_name," ",null==g?void 0:g.last_name]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:null==g?void 0:g.role})]})]})}),(0,r.jsxs)("div",{className:"space-y-6 px-4 py-6",children:[(0,r.jsxs)("ul",{className:"space-y-8",children:[(0,r.jsxs)("li",{className:"p-3 flex items-center gap-2 text-sm rounded-lg hover:bg-indigo-600 transition ".concat(b("home")?"bg-indigo-700":""),children:[(0,r.jsx)(o.xng,{className:"text-xl mr-4"}),(0,r.jsx)("a",{href:"/dashboard/user",className:"flex-1",children:"الصفحة الرئيسية"})]}),(0,r.jsxs)("li",{className:"p-3 flex items-center gap-2 text-sm rounded-lg hover:bg-indigo-600 transition ".concat(b("orders")?"bg-indigo-700":""),children:[(0,r.jsx)(o.W95,{className:"text-xl mr-4"}),(0,r.jsx)("a",{href:"/dashboard/user/myorders",className:"flex-1",children:"طلباتى"})]}),(0,r.jsxs)("li",{className:"p-3 flex items-center gap-2 text-sm rounded-lg hover:bg-indigo-600 transition ".concat(b("account")?"bg-indigo-700":""),children:[(0,r.jsx)(o.VRY,{className:"text-xl mr-4"}),(0,r.jsx)("a",{href:"/dashboard/user/myaccount",className:"flex-1",children:"إعدادات الحساب"})]})]}),(0,r.jsxs)("div",{className:"p-3 mt-12 text-center bg-red-600 text-sm rounded-lg cursor-pointer hover:bg-red-700 transition",onClick:()=>{localStorage.removeItem("wasl-token"),window.location.href="/auth/signin"},children:[(0,r.jsx)("i",{className:"bi bi-box-arrow-right text-lg ms-2"}),"تسجيل الخروج"]})]})]}),(0,r.jsxs)("div",{className:"ml-0 lg:mr-64 w-full p-4 ".concat(d?"z-32":"z-40"),children:[(0,r.jsx)("button",{className:"lg:hidden absolute top-4 right-4 text-2xl text-gray-200 p-2 bg-indigo-600 rounded-full hover:bg-indigo-800 transition duration-300 ease-in-out shadow-lg z-10",onClick:()=>{m(!d),x(!u)},children:(0,r.jsx)(o.Fm7,{})}),t]})]})}},6231:function(e,t,s){"use strict";s.d(t,{w_:function(){return c}});var r=s(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach(function(t){var r,a;r=t,a=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function c(e){return t=>r.createElement(m,i({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,s)=>r.createElement(t.tag,d({key:s},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var s,{attr:a,size:l,title:o}=e,c=function(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)s=l[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}(e,n),m=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:s,style:d(d({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[9461,7699,3464,2971,2117,1744],function(){return e(e.s=4330)}),_N_E=e.O()}]);